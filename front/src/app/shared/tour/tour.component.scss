.tour-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1050; /* Asegura que esté sobre el navbar (z-index de Bootstrap navbar es 1030) */
}

.tour-card {
  background-color: white;
  border-radius: 14px; /* Esquinas un poco más curvas */
  width: 90%;
  max-width: 450px;
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.18); /* Sombra un poco más suave y extendida */
  position: relative;
  /* overflow: visible para que la flecha (rombo) pueda sobresalir sin cortes */
  overflow: visible;
  border: 2px solid var(--primary); /* Borde más delgado */
  transition: box-shadow 0.2s ease, transform 0.12s ease;
  /* Evitar que el fondo blanco sobresalga mostrando "puntas" sobre el borde */
  background-clip: padding-box;
  -webkit-background-clip: padding-box;
}

.tour-arrow {
  position: absolute;
  width: 20px;
  height: 20px;
  background-color: white; /* Fondo del tour-card */
  z-index: 3; /* Asegura que esté sobre el tour-card */
  /* Por defecto, oculto y se posicionará con JS */
  display: none;
  /* Propiedades de borde y transformación se aplicarán dinámicamente en TS */
  box-shadow: 0 6px 10px rgba(0,0,0,0.12);
  /* Espacio para que el borde del card no corte el rombo. El color del outline
     se deja transparente para no alterar la apariencia, pero crea separación
     visual que evita artefactos en el borde. */
  outline: 2px solid transparent;
}

.tour-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 18px;
  border-bottom: 1px solid var(--border);
  background-color: var(--background);
  /* Mantener las esquinas superiores redondeadas y evitar que el fondo sobresalga */
  border-top-left-radius: 11px;
  border-top-right-radius: 11px;
}

.tour-progress {
  display: flex;
  align-items: center;
  gap: 8px;
  color: #FF395C; /* Color rojo principal UTP */
  font-weight: bold;
}

.shield-icon {
  width: 24px;
  height: 24px;
  color: #FF395C; /* Color rojo principal UTP */
}

.step-count {
  font-size: 0.9em;
  color: var(--muted-foreground);
}

.close-button {
  background: none;
  border: none;
  font-size: 1.5em;
  cursor: pointer;
  color: var(--muted-foreground);
  padding: 0;
}

.close-button:hover {
  color: var(--foreground);
}

.tour-card-body {
  padding: 18px 20px 22px 20px;
  /* Cuidar que el cuerpo no tenga esquinas que sobresalgan fuera del borde del card */
  border-bottom-left-radius: 8px;
  border-bottom-right-radius: 8px;
}

.tour-card-body h3 {
  margin-top: 0;
  color: var(--foreground);
  font-size: 1.5em;
  display: flex;
  align-items: center;
  gap: 10px;
}

/* Se eliminó pseudo-elemento ::after que ya no se usa (icono ahora en HTML) */

.tour-card-body p {
  color: var(--foreground);
  line-height: 1.6;
  margin-bottom: 20px;
}

.progress-bar-container {
  width: 100%;
  background-color: var(--muted);
  border-radius: 5px;
  height: 5px;
  margin-bottom: 20px;
  overflow: hidden;
}

.progress-bar {
  height: 100%;
  background-color: #FF395C; /* Rojo principal UTP */
  border-radius: 5px;
  transition: width 0.3s ease-in-out;
}

.tip-box {
  background-color: #e8f0fe; /* bg-blue-50 */
  border-left: 4px solid #4285f4; /* border-blue-500 */
  padding: 10px 15px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  gap: 10px;
  color: #1a73e8; /* text-blue-800 */
  font-size: 0.9em;
}

.tip-box i {
  color: #4285f4; /* text-blue-600 */
  font-size: 1.2em;
}

.tour-card-footer {
  display: flex;
  justify-content: space-between;
  padding: 14px 18px;
  border-top: 1px solid var(--border);
  background-color: var(--background);
  /* Mantener esquinas inferiores redondeadas para que el borde sea continuo */
  border-bottom-left-radius: 11px;
  border-bottom-right-radius: 11px;
}

.skip-button {
  background: none;
  border: none;
  color: var(--muted-foreground);
  cursor: pointer;
  font-size: 1em;
  padding: 8px 12px;
}

.skip-button:hover {
  color: var(--foreground);
}

.prev-button {
  background-color: var(--muted); /* Gris */
  color: var(--foreground);
  border: none;
  border-radius: 5px;
  padding: 10px 20px;
  cursor: pointer;
  font-size: 1em;
  display: flex;
  align-items: center;
  gap: 5px;
}

.prev-button:hover {
  background-color: var(--accent); /* Gris más oscuro */
}

.prev-button i {
  font-size: 1.1em;
}

.next-button {
  background-color: #FF395C; /* Rojo principal UTP */
  color: white;
  border: none;
  border-radius: 5px;
  padding: 10px 20px;
  cursor: pointer;
  font-size: 1em;
  display: flex;
  align-items: center;
  gap: 5px;
}

.next-button:hover {
  background-color: #E02A4C; /* Rojo más oscuro */
}

.next-button i {
  font-size: 1.1em;
}

/* Dark mode overrides for the tour modal */
html.dark-mode .tour-overlay,
:host-context(.dark-mode) .tour-overlay {
  background-color: rgba(0,0,0,0.85) !important;
}

html.dark-mode .tour-card,
:host-context(.dark-mode) .tour-card {
  background-color: #000000 !important;
  border: 2px solid rgba(255,57,92,0.14) !important; /* soft primary border */
  box-shadow: 0 8px 20px rgba(0,0,0,0.6) !important;
  color: #f5f5f5 !important;
}

html.dark-mode .tour-arrow,
:host-context(.dark-mode) .tour-arrow {
  display: block !important;
  background-color: #000000 !important;
  box-shadow: 0 6px 10px rgba(0,0,0,0.6) !important;
  outline: 2px solid rgba(255,57,92,0.08);
}

html.dark-mode .tour-card-header,
:host-context(.dark-mode) .tour-card-header,
html.dark-mode .tour-card-footer,
:host-context(.dark-mode) .tour-card-footer {
  background-color: transparent !important;
  border-color: rgba(255,255,255,0.06) !important;
}

html.dark-mode .tour-card-body h3,
:host-context(.dark-mode) .tour-card-body h3 {
  color: #ffffff !important;
}

html.dark-mode .tour-card-body p,
:host-context(.dark-mode) .tour-card-body p {
  color: #dbe7ef !important;
}

/* Progress bar more visible in dark */
html.dark-mode .progress-bar {
  background-color: #FF395C !important;
}

/* Tip box dark variant */
html.dark-mode .tip-box,
:host-context(.dark-mode) .tip-box {
  background-color: rgba(30,136,229,0.08) !important; /* subtle blue */
  border-left: 4px solid #1e88e5 !important;
  color: #cfe5ff !important;
}
html.dark-mode .tip-box i,
:host-context(.dark-mode) .tip-box i {
  color: #1e88e5 !important;
}

/* Semantic icon colors for common tour icons */
html.dark-mode .tour-card-body .bi-shield-fill { color: #FF395C !important; }
html.dark-mode .tour-card-body .bi-megaphone-fill { color: #FF395C !important; }
html.dark-mode .tour-card-body .bi-geo-alt-fill { color: #22C55E !important; }
html.dark-mode .tour-card-body .bi-send-fill { color: #1e88e5 !important; }
html.dark-mode .tour-card-body .bi-bell-fill { color: #FF395C !important; }
html.dark-mode .tour-card-body .bi-file-earmark-text-fill { color: #FF395C !important; }
html.dark-mode .tour-card-body .bi-check-circle-fill { color: #22C55E !important; }

/* Buttons styling adjustments in dark mode */
html.dark-mode .prev-button { background-color: rgba(255,255,255,0.04) !important; color: #ffffff !important; }
html.dark-mode .next-button { background-color: #FF395C !important; color: #ffffff !important; }
html.dark-mode .skip-button { color: #bfc8d3 !important; }

