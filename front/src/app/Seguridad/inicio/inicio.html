<!-- Panel de Seguridad -->
<div class="security-panel">
  <!-- Header Superior -->
  <header class="header">
    <div class="header-left">
      <div class="shield-container">
        <span class="shield-icon material-icons">security</span>
      </div>
      <div class="header-info">
        <h1 class="header-title">Panel de Seguridad</h1>
        <p class="header-subtitle">Oficial Carlos Ramírez - S001</p>
      </div>
    </div>
    <div class="header-right">
      <span class="status-badge"
            [class.available]="statusBadge === 'DISPONIBLE'"
            [class.occupied]="statusBadge === 'OCUPADO'"
            [class.offline]="statusBadge === 'FUERA'">
        {{ statusBadge }}
      </span>
    </div>
  </header>

  <!-- Tarjetas de Estadísticas -->
  <section class="stats-section">
    <div class="stats-grid">
      <div class="stat-card pending">
        <div class="stat-icon material-icons">schedule</div>
        <div class="stat-content">
          <div class="stat-number">{{ pendingCount }}</div>
          <div class="stat-label">Reportes<br>Pendientes</div>
        </div>
      </div>
      <div class="stat-card investigating">
        <div class="stat-icon material-icons">visibility</div>
        <div class="stat-content">
          <div class="stat-number">{{ investigatingCount }}</div>
          <div class="stat-label">Investigando</div>
        </div>
      </div>
      <div class="stat-card completed">
        <div class="stat-icon material-icons">check_circle</div>
        <div class="stat-content">
          <div class="stat-number">{{ completedTodayCount }}</div>
          <div class="stat-label">Completados<br>Hoy</div>
        </div>
      </div>
      <div class="stat-card high-priority">
        <div class="stat-icon material-icons">warning</div>
        <div class="stat-content">
          <div class="stat-number">{{ highPriorityCount }}</div>
          <div class="stat-label">Alta<br>Prioridad</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Panel de Control de Estado -->
  <section class="control-panel">
    <div class="panel-header">
      <span class="panel-icon material-icons">person</span>
      <h2 class="panel-title">Control de Estado de Servicio</h2>
    </div>
    <div class="control-grid">
      <div class="control-item">
        <label class="control-label">Filtrar por Prioridad</label>
        <select #prioridadSel class="control-select" (change)="ra.applyFilters(prioridadSel.value, zonaSel.value)">
          <option value="">-- Todas --</option>
          <option value="baja">Baja</option>
          <option value="media">Media</option>
          <option value="alta">Alta</option>
        </select>
      </div>
      <div class="control-item">
        <label class="control-label">Filtrar por Zona</label>
        <select #zonaSel class="control-select" (change)="ra.applyFilters(prioridadSel.value, zonaSel.value)">
          <option value="">-- Todas las Zonas --</option>
          <option *ngFor="let z of zonesList" [value]="z.id">{{ z.nombre }}</option>
        </select>
      </div>
      <div class="control-item">
        <label class="control-label">Reportes Activos</label>
        <div class="active-reports">
          <div class="reports-number">{{ assignedCount }}</div>
          <div class="reports-label">casos asignados</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Reportes Asignados a Seguridad -->
  <!-- Reportes Asignados a Seguridad (migrado al componente) -->
  <app-reportes-asignados #ra></app-reportes-asignados>

  <!-- Reportes Completados se renderizan dentro del componente de asignados -->
</div>

<!-- Modal: Dirigiéndose a la Zona -->
<div class="modal-overlay" id="going-modal">
  <div class="modal">
    <div class="modal-header">
      <h3 class="modal-title">
        <span class="modal-icon material-icons">navigation</span>
        Dirigiéndose a la Zona
      </h3>
      <button class="modal-close">✕</button>
    </div>
    <div class="modal-body">
      <div class="navigation-icon">
        <span class="nav-arrow material-icons">arrow_right_alt</span>
      </div>
      <p class="modal-text">
        En camino a la zona del incidente<br><br>
        Su estado ha sido actualizado a "Ocupado". Presione "He llegado" cuando esté en la ubicación.
      </p>
      <div class="destination-info">
        <div class="info-item">Destino: Biblioteca Central</div>
        <div class="info-item">Zona: Campus Norte</div>
        <div class="info-item">Tipo: Robo de mochila</div>
      </div>
    </div>
    <div class="modal-actions">
      <button class="btn secondary">Cerrar</button>
      <button class="btn primary">
        <span class="btn-icon material-icons">location_on</span>
        He Llegado
      </button>
    </div>
  </div>
</div>

<!-- Modal: Completar Reporte -->
<div class="modal-overlay" id="complete-modal">
  <div class="modal">
    <div class="modal-header">
      <h3 class="modal-title">
        <span class="modal-icon material-icons">check_box</span>
        Completar Reporte - Parte Policial
      </h3>
      <button class="modal-close">✕</button>
    </div>
    <div class="modal-body">
      <div class="officer-info">Oficial: Carlos Ramírez (S001)</div>
      <div class="report-summary">
        <div class="summary-item">Reporte: Robo de mochila</div>
        <div class="summary-item">Ubicación: Biblioteca Central</div>
        <div class="summary-item">Descripción: [descripción original]</div>
      </div>
      <label class="textarea-label">
        Descripción del Parte Policial *
        <textarea class="police-description" placeholder="Describa detalladamente cómo se resolvió el incidente..."></textarea>
      </label>
      <p class="help-text">Esta descripción formará parte del parte oficial del incidente.</p>
    </div>
    <div class="modal-actions">
      <button class="btn secondary">Cancelar</button>
      <button class="btn primary">
        <span class="btn-icon material-icons">check_box</span>
        Completar Reporte
      </button>
    </div>
  </div>
</div>
