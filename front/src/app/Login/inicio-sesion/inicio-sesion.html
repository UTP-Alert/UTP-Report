<div class="login-page">
	<div class="login-grid">
		<!-- Sección izquierda (branding / bienvenida) -->
		<section class="welcome" aria-label="Información del sistema de reportes">
			<div class="welcome-inner">
				<div class="brand-illustration" role="img" aria-label="Ilustración representativa del sistema de seguridad">
					<div class="illustration-box">
						<!-- La carpeta 'public' se sirve en la raíz. Archivo real: public/login/utp_report.jpeg -->
						<img src="/login/utp_report.jpeg" alt="Ilustración del sistema de reportes" class="illustration-img" loading="lazy" />
					</div>
				</div>

				<div class="brand-title">
					<div class="brand-icon" aria-hidden="true">
						<svg class="lucide lucide-shield h-16 w-16 text-white" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
							<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
						</svg>
					</div>
					<div class="brand-text-block">
						<h1>UTP+Report</h1>
						<p class="subtitle">Sistema de Reportes de Seguridad</p>
					</div>
				</div>

			<div class="welcome-text">
				<h2>¡Bienvenido!</h2>
				<p>
					Reporta incidencias, recibe alertas y sigue el estado de tus reportes de forma rápida y sencilla.
				</p>
				<ul class="features" aria-label="Características principales">
					<li>
						<svg class="feature-svg" viewBox="0 0 24 24" aria-hidden="true">
							<circle cx="12" cy="12" r="9" />
							<path d="M9 12l2 2 4-4" />
						</svg>
						<span>Reportes anónimos y seguros</span>
					</li>
					<li>
						<svg class="feature-svg" viewBox="0 0 24 24" aria-hidden="true">
							<circle cx="12" cy="12" r="9" />
							<path d="M9 12l2 2 4-4" />
						</svg>
						<span>Notificaciones en tiempo real</span>
					</li>
					<li>
						<svg class="feature-svg" viewBox="0 0 24 24" aria-hidden="true">
							<circle cx="12" cy="12" r="9" />
							<path d="M9 12l2 2 4-4" />
						</svg>
						<span>Seguimiento de casos</span>
					</li>
					<li>
						<svg class="feature-svg" viewBox="0 0 24 24" aria-hidden="true">
							<circle cx="12" cy="12" r="9" />
							<path d="M9 12l2 2 4-4" />
						</svg>
						<span>Campus más seguro</span>
					</li>
				</ul>
			</div>
			</div>
		</section>

		<!-- Sección derecha (formulario login) -->
		<section class="login" aria-label="Formulario de inicio de sesión">
			<div class="login-inner">
				<div class="card" role="form" aria-labelledby="login-title">
					<header class="card-header">
						<div class="card-title-row">
							<div class="user-icon" aria-hidden="true">
								<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
									<g class="user-body"><path d="M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/></g>
									<g class="user-head" transform="translate(-2 0)"><circle cx="12" cy="7" r="4"/></g>
								</svg>
							</div>
							<h3 id="login-title" class="card-title-heading">¡Hola!</h3>
						</div>
						<p class="card-desc">Ingresa tus datos para iniciar sesión.</p>
					</header>

					<!-- Bloque de credenciales eliminado -->

					<form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
						<div class="backend-error" *ngIf="backendError()" role="alert">{{ backendError() }}</div>
						<div class="field-group">
							<label for="username">Usuario: código UTP</label>
							<div class="input-wrapper">
								<span class="icon" aria-hidden="true">
									<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
										<g class="user-body"><path d="M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/></g>
										<g class="user-head" transform="translate(-2 0)"><circle cx="12" cy="7" r="4"/></g>
									</svg>
								</span>
								<input id="username" type="text" formControlName="username" placeholder="Ingresa tu código UTP" autocomplete="username" aria-describedby="username-hint" required>
							</div>
							<small id="username-hint" class="hint">Estudiantes: U1234567 | Admins: D1234567 | Seguridad: S001</small>
							<div class="error" *ngIf="submitted && form.controls['username'].errors?.['required']">El usuario es obligatorio.</div>
						</div>

						<div class="field-group">
							<label for="password">Contraseña</label>
							<div class="input-wrapper password-wrapper">
								<span class="icon" aria-hidden="true">
									<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
								</span>
								<input [type]="showPassword ? 'text' : 'password'" id="password" formControlName="password" placeholder="Ingresa tu contraseña" autocomplete="current-password" required>
								<button type="button" class="toggle-pass" (click)="togglePasswordVisibility()" [attr.aria-label]="showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'">
									<svg *ngIf="!showPassword" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z"/><circle cx="12" cy="12" r="3"/></svg>
									<svg *ngIf="showPassword" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" x2="23" y1="1" y2="23"/></svg>
								</button>
							</div>
							<div class="error" *ngIf="submitted && form.controls['password'].errors?.['required']">La contraseña es obligatoria.</div>
						</div>

						<div class="form-row space-between">
							<label class="remember">
								<input type="checkbox" formControlName="rememberMe"> <span>Recordarme</span>
							</label>
							<a class="link" href="https://contrasena.utp.edu.pe/Recuperacion/OlvideMiClave.aspx" rel="noopener" target="_blank">¿Olvidaste tu contraseña?</a>
						</div>

						<button type="submit" class="primary-btn" [disabled]="loading">
							<span class="btn-icon" aria-hidden="true">
								<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
							</span>
							<span *ngIf="!loading">Iniciar Sesión</span>
							<span *ngIf="loading" class="spinner" aria-live="polite">Procesando...</span>
						</button>
					</form>
				</div>

				<footer class="footer">
					<p>© 2025 UTP+Report - Sistema de Seguridad Universitaria</p>
				</footer>
			</div>
		</section>
	</div>
</div>

<!-- Botón flotante SOS -->
<button type="button" class="sos-button" (click)="onSOS()" aria-label="Botón de emergencia SOS">
	<svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 9v4"/><path d="M12 17h.01"/><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4.27 21h15.46a2 2 0 0 0 2-3Z"/></svg>
	<span>SOS</span>
</button>
