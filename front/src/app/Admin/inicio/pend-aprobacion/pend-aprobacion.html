<h2 class="text-2xl mb-4 flex items-center gap-3">
	<i class="alert-circle-icon h-8 w-8 text-purple-600"></i>
	Reportes Pendientes de Aprobación ({{ reportes.length }})
</h2>

<div *ngIf="loading" class="card border-2 border-dashed border-gray-300">
	<div class="card-content p-12 text-center">
		<i class="alert-circle-icon h-16 w-16 text-gray-400 mx-auto mb-4"></i>
		<h3 class="text-xl mb-2 text-gray-600">Cargando reportes...</h3>
	</div>
</div>

<div *ngIf="!loading && reportes.length === 0" class="card border-2 border-dashed border-gray-300">
	<div class="card-content p-12 text-center">
		<i class="alert-circle-icon h-16 w-16 text-gray-400 mx-auto mb-4"></i>
		<h3 class="text-xl mb-2 text-gray-600">No hay reportes pendientes de aprobación</h3>
		<p class="text-gray-500 mb-6">Todos los reportes han sido revisados y aprobados o rechazados.</p>
		<span class="badge badge-outline px-4 py-2">✅ Estado: Todo al día</span>
	</div>
</div>

<div *ngFor="let r of reportes" class="card border-l-4 border-l-purple-500 bg-purple-50 hover:shadow-lg transition-all mb-4">
	<div class="card-content p-4">
		<!-- pending badge top-right -->
		<span class="badge pending top-right">PENDIENTE APROBACIÓN</span>

		<div class="flex justify-between items-start mb-2">
			<h3 class="text-base sm:text-lg font-semibold">{{ tiposMap[r.tipoIncidenteId] || ('Reporte') }}</h3>
			<div class="flex gap-2 items-center">
				<span class="badge priority" [ngClass]="{'high': (r.ultimaPrioridad||'')==='alta','medium': (r.ultimaPrioridad||'')==='media','low': (r.ultimaPrioridad||'')==='baja'}">{{ (r.ultimaPrioridad||'') | uppercase }}</span>
			</div>
		</div>
		<div class="flex items-center gap-2 text-sm text-gray-600 mb-2">
			<i class="map-pin-icon h-4 w-4"></i>
			<span>{{ zonasMap[r.zonaId] || (r.zonaId ? ('Zona ' + r.zonaId) : 'Sin zona') }}</span>
			<span>•</span>
			<span>Completado: {{ (r.reporteGestion && r.reporteGestion.fechaActualizacion) ? (r.reporteGestion.fechaActualizacion | date:'short') : (r.fechaUltimaGestion ? (r.fechaUltimaGestion | date:'short') : (r.fechaCreacion | date:'short')) }}</span>
			<span>•</span>
			<span>ID: {{ r.id }}</span>
		</div>
		<p class="text-gray-700 mb-4">Incidente de seguridad resuelto, pendiente de aprobación final.</p>

		<div class="parte-box mb-4">
			<h4 class="parte-title">Parte de Seguridad - Descripción de Resolución</h4>
			<div class="parte-content">{{ r.mensajeSeguridad }}</div>
			<div class="parte-meta">Completado: {{ (r.reporteGestion && r.reporteGestion.fechaActualizacion) ? (r.reporteGestion.fechaActualizacion | date:'short') : (r.fechaUltimaGestion ? (r.fechaUltimaGestion | date:'short') : (r.fechaCreacion | date:'short')) }}</div>
		</div>

		<div class="bg-gray-50 p-3 rounded-lg text-sm mb-4">
			<p class="text-gray-600">Asignado a: <span class="font-medium">Equipo de Seguridad</span></p>
			<p class="text-gray-600">Fecha de asignación: <span class="font-medium">{{ r.fechaCreacion | date:'short' }}</span></p>
		</div>

		<div class="flex justify-end gap-2 actions-row">
			<button class="btn btn-review">Revisar y Decidir</button>
			<button class="btn btn-approve">Aprobar Inmediatamente</button>
			<button class="btn btn-reject">Rechazar</button>
		</div>
	</div>
</div>
