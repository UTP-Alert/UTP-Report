.dr-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,.5); display: grid; place-items: center; z-index: 3600; }
.dr-modal { background:#fff; border-radius: 14px; width: calc(100% - 1rem); max-width: 520px; border:1px solid #E5E7EB; box-shadow:0 25px 50px -12px rgba(0,0,0,.3); overflow:hidden; }
.dr-header { display:flex; justify-content:space-between; align-items:center; padding:.6rem .9rem; border-bottom:1px solid #E5E7EB; }
.dr-header h3 { margin:0; font-size:1.05rem; }
.dr-header .x { background:transparent; border:none; font-size:1.2rem; line-height:1; cursor:pointer; padding:.25rem .4rem; }
.dr-body { padding:.75rem .9rem; }
.dr-select { margin-bottom:.75rem; padding: 0 .5rem; }
.dr-select label { display:block; font-size:.85rem; color:#374151; margin:0 0 .25rem; }
.dr-select { position: relative; }
.dr-select-btn { width:100%; max-width:100%; text-align:left; border:1px solid #E5E7EB; border-radius:10px; padding:.45rem .75rem; background:#F9FAFB; display:flex; align-items:center; justify-content:space-between; gap:.5rem; }
.dr-select-btn .txt { overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.dr-menu { position:absolute; left:.5rem; right:.5rem; top: 100%; margin-top:.35rem; background:#fff; border:1px solid #E5E7EB; border-radius:10px; box-shadow:0 10px 30px rgba(0,0,0,.15); max-height: 240px; overflow:auto; z-index: 10; }
.dr-item { display:block; width:100%; text-align:left; padding:.5rem .75rem; background:#fff; border:none; cursor:pointer; }
.dr-item:hover, .dr-item[aria-selected="true"] { background:#E5F0FF; }
.dr-empty-menu { padding:.6rem .75rem; color:#6B7280; }
.dr-content .dr-desc { margin:.25rem 0 .5rem; color:#111827; }
.dr-img { display:grid; place-items:center; }
.dr-img img { max-width:100%; border-radius:12px; border:1px solid #E5E7EB; }
.dr-empty { margin:0; color:#6B7280; }
.dr-note { color:#6B7280; font-size:.9rem; }
.dr-actions { display:flex; justify-content:flex-end; gap:.5rem; padding:.6rem .9rem; border-top:1px solid #E5E7EB; }
.btn, .mm-btn { background:#FF395C; color:#fff; border:1px solid #11182733; border-radius:10px; padding:.5rem .9rem; font-weight:600; cursor:pointer; }
.btn:hover { filter:brightness(.95); }

@media (max-width: 420px) {
	.dr-header { padding:.55rem .7rem; }
	.dr-body { padding:.6rem .5rem; }
	.dr-actions { padding:.55rem .7rem; }
	.dr-select { padding: 0 .4rem; }
}

/* Dark mode overrides (also for component encapsulation) */
html.dark-mode .dr-modal,
body.dark-mode .dr-modal,
:host-context(.dark-mode) .dr-modal {
	background-color: #0b0b0b !important;
	color: #ffffff !important;
	border-color: rgba(255,255,255,0.06) !important;
	box-shadow: none !important;
}

html.dark-mode .dr-header,
body.dark-mode .dr-header,
:host-context(.dark-mode) .dr-header {
	/* Ensure header has solid dark background when modal content scrolls */
	background: rgba(11,11,11,0.95) !important;
	border-bottom-color: rgba(255,255,255,0.06) !important;
	color: #ffffff !important;
	backdrop-filter: blur(4px);
}

html.dark-mode .dr-body,
body.dark-mode .dr-body,
:host-context(.dark-mode) .dr-body {
	background: transparent !important;
	color: #ffffff !important;
}

html.dark-mode .dr-select-btn,
body.dark-mode .dr-select-btn,
:host-context(.dark-mode) .dr-select-btn,
html.dark-mode .dr-menu,
body.dark-mode .dr-menu,
:host-context(.dark-mode) .dr-menu,
html.dark-mode .dr-item,
body.dark-mode .dr-item,
:host-context(.dark-mode) .dr-item {
	background-color: rgba(255,255,255,0.02) !important;
	border-color: rgba(255,255,255,0.06) !important;
	color: #ffffff !important;
}

html.dark-mode .dr-img img,
body.dark-mode .dr-img img,
:host-context(.dark-mode) .dr-img img {
	border-color: rgba(255,255,255,0.06) !important;
}

html.dark-mode .dr-actions .btn,
body.dark-mode .dr-actions .btn,
:host-context(.dark-mode) .dr-actions .btn {
	background-color: #FF395C !important;
	color: #fff !important;
}

/* ensure small neutral buttons look dark */
html.dark-mode .btn[style*="background:#fff"],
body.dark-mode .btn[style*="background:#fff"],
:host-context(.dark-mode) .btn[style*="background:#fff"] {
	background: #222 !important;
	color: #e6eef8 !important;
	border-color: rgba(255,255,255,0.06) !important;
}

/* stronger labels and helper text */
:host-context(.dark-mode) .dr-select label { color: #ffffff !important; font-weight:600 !important; }
:host-context(.dark-mode) .dr-select-btn .txt { color: #ffffff !important; }
:host-context(.dark-mode) .dr-item[aria-selected="true"], :host-context(.dark-mode) .dr-item:hover { background-color: rgba(255,255,255,0.04) !important; }
:host-context(.dark-mode) .dr-empty, :host-context(.dark-mode) .dr-note { color: #d0d7df !important; }
:host-context(.dark-mode) .dr-content .dr-desc { color: #ffffff !important; }

/* Ensure dropdown menu items are dark and readable in dark mode */
:host-context(.dark-mode) {
	.dr-menu {
		/* Make the dropdown fully opaque and above modal content */
		background-color: rgba(11,11,11,0.98) !important;
		border-color: rgba(255,255,255,0.06) !important;
		box-shadow: 0 12px 30px rgba(0,0,0,0.7) !important;
		z-index: 9999 !important;
	}

	.dr-item {
		background: transparent !important;
		color: #ffffff !important;
		position: relative !important;
		z-index: 10000 !important; /* ensure each item sits above modal content */
	}

	.dr-item:hover,
	.dr-item[aria-selected="true"] {
		background: rgba(255,255,255,0.06) !important;
		color: #ffffff !important;
		font-weight: 600 !important;
	}

	.dr-select-btn {
		background: rgba(255,255,255,0.02) !important;
		border-color: rgba(255,255,255,0.06) !important;
		color: #ffffff !important;
	}

	.dr-select-btn .txt { color: #e6eef8 !important; }

	.dr-empty-menu { color: #cfd6dd !important; background: transparent !important; }
}
