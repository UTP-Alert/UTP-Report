<div class="dr-backdrop" (click)="cerrar()">
	<div class="dr-modal" (click)="$event.stopPropagation()">
		<div class="dr-header">
			<h3>Detalle de Reporte</h3>
			<button type="button" class="x" (click)="cerrar()">×</button>
		</div>
		<div class="dr-body">
			<ng-container *ngIf="(reportesHoy?.length || 0) > 0; else noReports">
				<div class="dr-select" (click)="$event.stopPropagation()">
					<label>Selecciona reporte del día</label>
					<button type="button" class="dr-select-btn" (click)="toggleMenu($event)" [attr.aria-expanded]="showMenu">
						<span class="txt">{{ label(seleccionado) }}</span>
						<span class="chev" aria-hidden="true">▾</span>
					</button>
					<div class="dr-menu" *ngIf="showMenu" role="listbox">
						<button class="dr-item" type="button" *ngFor="let r of reportesHoy" (click)="selectReporte(r)" [attr.aria-selected]="seleccionado?.id===r.id">
							{{ label(r) }}
						</button>
						<div class="dr-empty-menu" *ngIf="reportesHoy.length===0">Sin reportes hoy</div>
					</div>
				</div>
				<div class="dr-content" *ngIf="seleccionado">
					<p class="dr-desc">{{ seleccionado.descripcion }}</p>
					<div class="dr-img" *ngIf="fotoSrc(seleccionado) as src">
						<img [src]="src" alt="Evidencia del reporte" />
					</div>
					<p class="dr-note" *ngIf="!fotoSrc(seleccionado)">Este reporte no contiene fotografía adjunta.</p>
				</div>
			</ng-container>
			<ng-template #noReports>
				<p class="dr-empty">No tienes reportes hoy.</p>
			</ng-template>
		</div>
		<div class="dr-actions">
			<button type="button" class="btn" (click)="cerrar()">Cerrar</button>
		</div>
	</div>
</div>
